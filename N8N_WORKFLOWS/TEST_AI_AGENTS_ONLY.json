{
  "name": "TEST: AI Agents Only (Claude Sonnet 4.5)",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300],
      "id": "manual-trigger",
      "name": "Manual Trigger"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "topic",
              "name": "topic",
              "type": "string",
              "value": "Satisfying soap cutting ASMR with colorful patterns"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [460, 300],
      "id": "set-topic",
      "name": "Set Topic"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{$json.topic}}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Sen viral video fikirleri Ã¼reten bir AI'sÄ±n. KullanÄ±cÄ±nÄ±n verdiÄŸi konuya gÃ¶re TEK BÄ°R viral video fikri Ã¼ret.\n\n**Kurallar:**\n1. Sadece 1 fikir Ã¼ret\n2. Fikir: Maksimum 13 kelime, viral ve ilgi Ã§ekici\n3. Caption: KÄ±sa, Ã§arpÄ±cÄ±, 1 emoji ve tam 12 hashtag\n4. Environment: Maksimum 20 kelime, gÃ¶rsel ortam tanÄ±mÄ±\n5. Sound: Maksimum 15 kelime, ses/mÃ¼zik tanÄ±mÄ±\n6. Duration: Video sÃ¼resi Ã¶nerisi (15-60 saniye)\n7. Style: GÃ¶rsel stil (cinematic, ASMR, satisfying, vb)\n\n**Ã‡Ä±ktÄ± FormatÄ± (JSON):**\n```json\n{\n  \"idea\": \"13 kelimelik fikir\",\n  \"caption\": \"caption emoji ile\",\n  \"hashtags\": [\"hashtag1\", \"hashtag2\", \"hashtag3\", \"hashtag4\", \"hashtag5\", \"hashtag6\", \"hashtag7\", \"hashtag8\", \"hashtag9\", \"hashtag10\", \"hashtag11\", \"hashtag12\"],\n  \"environment\": \"gÃ¶rsel ortam maksimum 20 kelime\",\n  \"sound\": \"ses tanÄ±mÄ± maksimum 15 kelime\",\n  \"duration\": 30,\n  \"style\": \"cinematic, ASMR, satisfying\"\n}\n```\n\n**Ã–nemli:**\n- VÄ°RAL olmalÄ±: trend sesler, tatmin edici gÃ¶rseller\n- BASÄ°T olmalÄ±: Net, odaklÄ± sahneler\n- TÃœRK kitleye uygun: TÃ¼rk izleyici iÃ§in Ã§ekici iÃ§erik\n- SADECE geÃ§erli JSON dÃ¶ndÃ¼r, baÅŸka metin yok"
        },
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "",
          "cachedResultName": "Claude Sonnet 4.5"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [680, 300],
      "id": "ai-agent-1",
      "name": "AI Agent 1: Fikir Ãœret"
    },
    {
      "parameters": {
        "jsCode": "// Parse AI Agent 1 output\nconst response = $json.output || $json.text || JSON.stringify($json);\n\nconsole.log('ğŸ¨ AI Agent 1 Response:', response);\n\nlet parsed;\ntry {\n  const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n  if (jsonMatch) {\n    parsed = JSON.parse(jsonMatch[0]);\n  } else {\n    parsed = JSON.parse(response);\n  }\n} catch (e) {\n  console.error('âŒ JSON parse hatasÄ±:', e);\n  throw new Error('AI Agent 1 geÃ§erli JSON dÃ¶ndÃ¼rmedi: ' + response);\n}\n\nif (!parsed.idea || !parsed.caption || !parsed.environment) {\n  throw new Error('âŒ Gerekli alanlar eksik');\n}\n\nconsole.log('âœ… Video fikri:', parsed.idea);\n\nreturn [{\n  json: {\n    ...parsed,\n    topic: $('Set Topic').first().json.topic\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 300],
      "id": "parse-idea",
      "name": "Parse Fikir"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Konu: {{$json.topic}}\n\nFikir: {{$json.idea}}\n\nOrtam: {{$json.environment}}\n\nSes: {{$json.sound}}\n\nStil: {{$json.style}}\n\nSÃ¼re: {{$json.duration}} saniye",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Sen AI video generation iÃ§in detaylÄ± prompt yazan bir uzmansÄ±n (Gemini Veo 3 iÃ§in).\n\n**GÃ¶revin:**\nVerilen video fikrine gÃ¶re, Veo 3'Ã¼n kullanabileceÄŸi detaylÄ± sinematik sahne tanÄ±mlarÄ± yaz.\n\n**Gereksinimler:**\n1. Video sÃ¼resine gÃ¶re 1-3 sahne oluÅŸtur\n2. Her sahne 1000-2000 karakter olmalÄ±\n3. Sinematik dil kullan (kamera aÃ§Ä±larÄ±, Ä±ÅŸÄ±k, hareket, renkler)\n4. Ne GÃ–RÃœLEBÄ°LECEÄÄ°NE odaklan, soyut kavramlar deÄŸil\n5. Sahneler arasÄ± akÄ±cÄ± geÃ§iÅŸler\n6. ASMR dostu ve tatmin edici\n\n**Ã‡Ä±ktÄ± FormatÄ± (JSON):**\n```json\n{\n  \"scenes\": [\n    {\n      \"sceneNumber\": 1,\n      \"duration\": 15,\n      \"prompt\": \"DetaylÄ± gÃ¶rsel tanÄ±m (1000-2000 karakter). Kamera hareketi, Ä±ÅŸÄ±k, renkler, dokular, aksiyon dahil. Ã–rnek: Keskin bir bÄ±Ã§ak parlak mor sabun barÄ±nÄ± keserken yakÄ±n Ã§ekim, kamera yavaÅŸÃ§a hareket ediyor, yumuÅŸak doÄŸal Ä±ÅŸÄ±k sabunun parlak yÃ¼zeyini vurguluyor, kesimin tatmin edici ASMR sesleri...\"\n    }\n  ],\n  \"overallStyle\": \"cinematic, 4K, ASMR, satisfying\",\n  \"cameraWork\": \"smooth tracking shots, close-ups, macro\",\n  \"lighting\": \"soft natural light, studio setup\",\n  \"colorPalette\": \"vibrant, saturated colors\"\n}\n```\n\n**Ã–nemli:**\n- GÃ–RSEL ve SPESÄ°FÄ°K promptlar\n- Her sahne kendi iÃ§inde tam olmalÄ± ama doÄŸal akmalÄ±\n- Toplam sÃ¼re istenen video sÃ¼resiyle eÅŸleÅŸmeli\n- AI video generatorlarÄ±n anlayacaÄŸÄ± dil kullan\n- SADECE geÃ§erli JSON dÃ¶ndÃ¼r"
        },
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "",
          "cachedResultName": "Claude Sonnet 4.5"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [1120, 300],
      "id": "ai-agent-2",
      "name": "AI Agent 2: DetaylÄ± Promptlar"
    },
    {
      "parameters": {
        "jsCode": "// Parse AI Agent 2 output\nconst response = $json.output || $json.text || JSON.stringify($json);\nconst ideaData = $('Parse Fikir').first().json;\n\nconsole.log('ğŸ¬ AI Agent 2 Response:', response);\n\nlet parsed;\ntry {\n  const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n  if (jsonMatch) {\n    parsed = JSON.parse(jsonMatch[0]);\n  } else {\n    parsed = JSON.parse(response);\n  }\n} catch (e) {\n  console.error('âŒ JSON parse hatasÄ±:', e);\n  throw new Error('AI Agent 2 geÃ§erli JSON dÃ¶ndÃ¼rmedi: ' + response);\n}\n\nif (!parsed.scenes || parsed.scenes.length === 0) {\n  throw new Error('âŒ Sahne bulunamadÄ±');\n}\n\nconsole.log('âœ…', parsed.scenes.length, 'sahne oluÅŸturuldu');\n\n// TÃ¼m sahne promptlarÄ±nÄ± birleÅŸtir\nconst combinedPrompt = parsed.scenes\n  .map((scene, i) => `Sahne ${i + 1} (${scene.duration}s): ${scene.prompt}`)\n  .join('\\n\\n');\n\nreturn [{\n  json: {\n    ...ideaData,\n    scenes: parsed.scenes,\n    overallStyle: parsed.overallStyle,\n    cameraWork: parsed.cameraWork,\n    lighting: parsed.lighting,\n    colorPalette: parsed.colorPalette,\n    veo3Prompt: combinedPrompt,\n    totalScenes: parsed.scenes.length,\n    testComplete: true\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1340, 300],
      "id": "parse-prompts",
      "name": "Parse Promptlar"
    },
    {
      "parameters": {
        "resource": "message",
        "operation": "sendMessage",
        "chatId": "={{$env.TELEGRAM_CHAT_ID}}",
        "text": "=âœ… **AI AGENT TESTÄ° TAMAMLANDI**\n\nğŸ“Œ **Konu:** {{$json.topic}}\n\nğŸ’¡ **Fikir:** {{$json.idea}}\n\nğŸ“ **Caption:** {{$json.caption}}\n\nğŸ·ï¸ **Hashtags:**\n{{$json.hashtags.map(h => '#' + h).join(' ')}}\n\nğŸ¨ **Stil:** {{$json.style}}\nâ±ï¸ **SÃ¼re:** {{$json.duration}} saniye\nğŸï¸ **Sahne SayÄ±sÄ±:** {{$json.totalScenes}}\n\nğŸ“¸ **Kamera:** {{$json.cameraWork}}\nğŸ’¡ **IÅŸÄ±k:** {{$json.lighting}}\nğŸ¨ **Renk:** {{$json.colorPalette}}\n\n---\n**ğŸ¬ VEO 3 PROMPTU:**\n\n{{$json.veo3Prompt.substring(0, 500)}}...\n\n_(Tam prompt {{$json.veo3Prompt.length}} karakter)_\n\n---\nâœ… Claude AI Agent'larÄ± Ã§alÄ±ÅŸÄ±yor!\nâœ… Video generation iÃ§in hazÄ±r!\n\nÅimdi Veo 3'e bu promptu gÃ¶nderebilirsin.",
        "options": {
          "parse_mode": "Markdown"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1560, 300],
      "id": "telegram-result",
      "name": "Telegram: SonuÃ§",
      "credentials": {
        "telegramApi": {
          "id": "TELEGRAM_CREDENTIAL_ID",
          "name": "Telegram Bot"
        }
      }
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "Set Topic",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Topic": {
      "main": [
        [
          {
            "node": "AI Agent 1: Fikir Ãœret",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent 1: Fikir Ãœret": {
      "main": [
        [
          {
            "node": "Parse Fikir",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Fikir": {
      "main": [
        [
          {
            "node": "AI Agent 2: DetaylÄ± Promptlar",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent 2: DetaylÄ± Promptlar": {
      "main": [
        [
          {
            "node": "Parse Promptlar",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Promptlar": {
      "main": [
        [
          {
            "node": "Telegram: SonuÃ§",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "active": false
}
